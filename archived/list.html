<!DOCTYPE html>
<html ng-app = "listApp">

<head>


<meta charset=utf-8 />

<title>支持與學習分享列印--印出對人有幫助的引介清單</title>

<link rel="stylesheet" href="stylesheets/editor.css" />


<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/flick/jquery-ui.css">

<style type="text/css">

#popup-content {
  display: block;
  background: #fff;
  position: fixed;
  width: 80%;
  height: 80%;
  top: 10%;
  left: 10%;
  z-index: 98;
}

#popup-content * {
  position: relative;
  z-index: 99;
}

body {
	font-family: 華康少女體,華康少女文字,華康少女文字W7,華康少女文字W3,BiauKai;
}


</style>


</head>


<body ng-controller = "Ctrl" class = "{{root.data.c.theme}}">



<form id="frm" class = "noPrint">


  <div id = "all" >
    <span ng-show = "root.gifts | useKey:key | useKey:keyLocal | useKey:keySpecial | useKey:yesAge | useKey:keySelect |  useKey:no:1 | useKey:noSelect:1 | useKey:noAge:1 | sortByLocal:keyLocal | allChecked" >
      
      <button ng-click = "root.gifts = root.gifts | useKey:key | useKey:keyLocal | useKey:keySpecial | useKey:yesAge | useKey:keySelect |  useKey:no:1 | useKey:noSelect:1 | useKey:noAge:1 | sortByLocal:keyLocal | forceChecked:false "> 取消全部
	  </button>
	</span>

    <span ng-hide = "root.gifts | useKey:key | useKey:keyLocal | useKey:keySpecial | useKey:yesAge | useKey:keySelect |  useKey:no:1 | useKey:noSelect:1 | useKey:noAge:1 | sortByLocal:keyLocal | allChecked">

      <button ng-click = "root.gifts = root.gifts | useKey:key | useKey:keyLocal | useKey:keySpecial | useKey:yesAge |  useKey:no:1 | useKey:noSelect:1 | useKey:noAge:1 | sortByLocal:keyLocal | forceChecked:true"> 選取全部</button>
     </span>


  </div>
  <hr>


  <div id = "rightCustom" class="noPrint"> 

        <span ng-hide = "root.gifts">資料讀取中...</span>
        
        <ul id = "sands">

            <li ng-repeat = "gift in root.gifts | useKey:key | useKey:keyLocal | useKey:keySpecial | useKey:yesAge | useKey:keySelect |  useKey:no:1 | useKey:noSelect:1 | useKey:noAge:1 | sortByLocal:keyLocal "> <!--  | useKey:keySelect -->
            	<input type="checkbox" ng-model = "gift.checked">
            	
   				
            {{gift.title}}      
            <span class = "small">
            <a href = "http://{{ gift.url | makeQR }}" target = "_blank" ng-mouseover = "$parent.pop = true; $parent.popURL = (gift.url | maybeHTTP)">
              {{ gift.url | makeQR }}
            </a>

            <br/>
            {{gift.tags}} 

            </span>

          <hr>
        </li>

        </ul>

      </div>

    </form>




<div id = "page" class="print {{root.data.c.theme}}"> 
  
    <div id = "header" class="noPrint">
      <!-- TOOL -->
      <span id = 'updownload'>


        <a id = "download" class ="d" 

        ng-href="{{root | forDownload}}"  download = "{{root.myName | forDownloadName }}"

        target = "_blank"
        ng-click = "save()"
        ng-mouseover = "hintD = true"
        ng-mouseout = "hintD = false"
        > 儲存檔案


        <span ng-show = "hintD">
        <br>
          <span ng-bind = " '如出現一個很多字的頁面，請依下列指示：在空白處按「右鍵」→ 選「將網頁諸存為」→ 「'+ root.myName + '的學習資源.deck.json」'">  <!-- 改這裡 -->

         </span>
        </a>

      </span>
     
      <span>

          <input style = "width:16px" name = "pub" type = "radio" ng-model = "root.public" value="2"/>公開
<!--          <input style = "width:16px" name = "pub" type = "radio" ng-model = "root.public" value="1"/>不公開         --> 
          <input style = "width:16px" name = "pub" type = "radio" ng-model = "root.public" value="0" />私人


        <a id = "info" class = "msg-icon msg-icon-info"
            ng-click = "askPublic()">
         </a>
    
        </span>

        <span>

      開啟舊檔
      
        <input id ="upload" type="file" fileread = "root" filetype = "json" accept="application/json"/>


      <button id = "doPrint" class="noPrint" onclick="window.print()">列印</button>

    <select ng-model = "root.data.c.theme" class = "s">
      <option ng-selected ="root.data.c.theme == '春'" value = "spring">春</option>
      <option ng-selected ="root.data.c.theme == '夏'" value = "summer">夏</option>
      <option ng-selected ="root.data.c.theme == '秋'" value = "fall">秋</option>
      <option ng-selected ="root.data.c.theme == '冬'" value = "winter">冬</option>
      <option ng-selected ="!root.data.c.theme" value = "">背景主題</option>
    </select>

        <input ng-model = "root.myName" placeholder = "標題">

      </span>
      
<!-- TOOL -->

  <hr>

  <div ng-mouseover = "editC = true" ng-mouseout = "editC = false">樣式設定

	  <div ng-show = "editC">
	      <span>自訂字級：</span>
	  <input type = "number" class = "num" ng-model ="root.c.size" ng-init = " root.c.size = 14 ">
	    <span>顯示標籤上限：</span>
	  <input type = "number" class = "num"  ng-model ="root.c.tagsLimit" ng-init = " root.c.tagsLimit = 6">

	  <br/>
	    <input type="checkbox" ng-model = "root.c.qr" ng-init = "root.c.qr = true">
	    <span>顯示QR碼&nbsp;&nbsp;&nbsp;&nbsp;</span>
	    <span>標號類別</span>

	    <select name = "ol" ng-model = "root.c.ol" ng-init = "root.c.ol = 'cjk-ideographic'">
	   	    <option value="cjk-ideographic">cjk-ideographic</option>
      		<option ng-repeat = "op in ['circle','square','disk','decimal','lower-roman','upper-roman','lower-alpha','upper-alpha','lower-greek']" value="{{op}}">{{op}}</option>
     </select>
	</div>
</div>


  <hr>
    <div ng-mouseover = "editF = true" ng-mouseout = "editF = false">
    <span>包含：</span>

  <input id="tags" auto-complete ui-items="tags" type = "search" ng-model ="key" placeholder = "輸入關鍵字" >

    <select name = "yes" ng-model ="keyLocal">
      <option value = "">--地理位置--</option>
      <option ng-repeat = "tag in local_taiwan" value = "{{tag}}">{{tag.split('/')[0]}}</option>
    </select>
<!--
    <select name = "yes" ng-model ="keySpecial">
      <option value = "">--特教支持--</option>
      <option ng-repeat = "tag in special_edu" value = "{{tag}}">{{tag}}</option>
    </select>
  -->
    
    <select name = "yesAge" type = "number" ng-model ="yesAge">
      <option value = "">--年齡--</option>
      <option ng-repeat = "age in ages" value = "{{age}}">{{age}}歲</option>
    </select>

    <br/>
    <select name = "yes" ng-model ="keySelect">      
      <option value = "">--所有標籤--</option>
      <option ng-repeat = "tag in tags | notNullTag | orderBy:'n':true " value = "{{tag.t}}">{{tag.t}}({{tag.n}})</option>
    </select>
  
    <span ng-show = "editF">不包含：
  <input id = "tags" type = "search" auto-complete ui-items="tags" ng-model ="no" ng-init = "no = '付費'"></span> 

  <!--  <select name = "no" ng-model ="noSelect">      
      <option value = "">--所有標籤--</option>
      <option ng-repeat = "tag in tags | notNullTag | orderBy:'n':true " value = "{{tag.t}}">{{tag.t}}({{tag.n}})</option>
    </select>  

    <select name = "noAge" type = "number" ng-model ="noAge">
      <option value = "">--年齡--</option>
      <option ng-repeat = "age in ages" value = "{{age}}">{{ age}}歲</option>
    </select>-->

    <hr>

    </div>

    <br/>

    <br/>    <br/>

  <div id = "listA4" class = "{{root.data.c.theme}}" style="font-size: {{root.c.size}}pt">

      <ol style="list-style-type: {{root.c.ol}}">
        <li ng-repeat = "gift in root.gifts | checked ">
         
            <input class = "noPrint" type="checkbox" ng-model = "gift.checked">

            {{gift.title}}
            <a href = "http://{{ gift.url | makeQR }}" target = "_blank">
              {{ gift.url | makeQR  }}
            </a>

            <span id = "tags"> {{gift.tags | limitTag:root.c.tagsLimit | addQuote }}</span>    
            
            <span ng-show = "root.c.qr && gift.url">

                <a href = "http://{{gift.url | makeQR}}" target="_blank">

                  <img class = "qr" src="http://chart.apis.google.com/chart?chs=200x200&amp;cht=qr&amp;chld=|1&amp;chl=http%3A%2F%2F{{gift.url | makeQR}}%2F" alt="qrcode_ex" >

                </a>  </span>

        </li>

        <li ng-hide = "(root.gifts | checked).length > 0">
             以勾選和關鍵字，找到要列印的資源。
        </li>

        <li ng-hide = "(root.gifts | checked).length > 0">
             從右側欄中，將方框打勾，將支持與資源加入中央的白紙。
        </li>

        <li ng-hide = "(root.gifts | checked).length > 0">
             改變右側欄中的順序排號，即可重新排序。
        </li>

        <li ng-hide = "(root.gifts | checked).length > 0">
             按列印鍵，分享你的支持與祝福。
        </li>

      </ol>

    </div>

</div>

<div id='popup-content' popup='popURL' ng-show = "pop" ng-mouseout = "pop = false">


  <iframe id ="myframe" width = "100%" height = "100%">
  </iframe>

</div>



</body>


<!-- Components  -->

  <script src="bower_components/jquery/dist/jquery.min.js" type="text/javascript"></script>
  <script src="bower_components/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="bower_components/angular/angular.min.js" type="text/javascript"></script>
  <script src="bower_components/angular-animate/angular-animate.js" type="text/javascript"></script>
  <script src="bower_components/firebase/firebase.js" type="text/javascript"></script>
  <script src="bower_components/angularfire/dist/angularfire.min.js" type="text/javascript"></script>

<!-- JS  -->

<script type="text/javascript" src = "javascripts/list.js"></script>


</html>
